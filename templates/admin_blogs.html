<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background-color: #030303;
            color: white;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .tab-button {
            transition: all 0.6s cubic-bezier(0.25, 0.4, 0.25, 1);
        }
        .tab-text {
            transition: all 0.8s cubic-bezier(0.25, 0.4, 0.25, 1);
            max-width: 0;
            opacity: 0;
            overflow: hidden;
            white-space: nowrap;
        }
        .tab-text.expanded {
            max-width: 200px;
            opacity: 1;
            margin-left: 0.5rem;
        }
        .tab-button.selected {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .tab-button:not(.selected) {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
        .separator {
            width: 1px;
            height: 20px;
            margin: 0 0.5rem;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .anim-hidden-initial {
            opacity: 0;
        }
        .content-section {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .content-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
        }
        .form-item {
            margin-bottom: 1rem;
        }
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: white;
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.025em;
        }
        .form-input {
            width: 100%;
            height: 2.25rem;
            padding: 0.5rem 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.5rem;
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 0.875rem;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .form-input:focus {
            outline: none;
            border-color: rgb(59, 130, 246);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        .form-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            background-color: rgb(59, 130, 246);
            color: white;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.025em;
        }
        .form-button:hover {
            background-color: rgb(37, 99, 235);
        }
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: white;
            letter-spacing: -0.025em;
        }
        .section-content {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }
        .form-row {
            display: flex;
            gap: 1rem;
        }
        .form-row .form-item {
            flex: 1;
        }
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
        
        /* Calendar icon for date input */
        input[type="date"] {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>');
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1rem;
        }
        
        /* Remove button styling and animation */
        .remove-section {
            transition: all 0.3s ease;
            color: white !important;
        }
        .remove-section:hover {
            color: white !important;
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <nav class="fixed top-0 left-0 right-0 z-50">
        <div class="flex justify-center py-6">
            <div class="navbar-wrapper" style="backdrop-filter: blur(35px); -webkit-backdrop-filter: blur(35px); background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 70px; padding: 12px 20px;">
                <div id="navbarTabs" class="expandable-tabs flex items-center gap-4 anim-hidden-initial" style="animation: slideDown 0.8s cubic-bezier(0.25, 0.4, 0.25, 1) 0.3s forwards;">
                </div>
            </div>
        </div>
    </nav>
    <div class="fixed inset-0 bg-gradient-to-br from-indigo-500/[0.03] via-transparent to-rose-500/[0.03] pointer-events-none"></div>
    
    <!-- Main Content Sections -->
    <main class="pt-20 px-4">
        <!-- Add Blogs Section -->
        <section id="addBlogs" class="content-section active">
            <div class="form-container">
                <h2 class="section-title text-center">Add New Blog</h2>
                <form id="addBlogForm">
                    <!-- Main Image URL and Alt Text -->
                    <div class="form-row">
                        <div class="form-item">
                            <label class="form-label" for="mainImageUrl">
                                <i data-lucide="image" class="w-4 h-4 inline mr-2"></i>Main Image URL
                            </label>
                            <input
                                type="url"
                                id="mainImageUrl"
                                name="mainImageUrl"
                                class="form-input"
                                placeholder="https://example.com/image.jpg"
                                required
                            />
                        </div>
                        <div class="form-item">
                            <label class="form-label" for="mainImageAlt">
                                <i data-lucide="type" class="w-4 h-4 inline mr-2"></i>Main Image Alt Text
                            </label>
                            <input
                                type="text"
                                id="mainImageAlt"
                                name="mainImageAlt"
                                class="form-input"
                                placeholder="Describe the image..."
                                required
                            />
                        </div>
                    </div>

                    <!-- Blog Title -->
                    <div class="form-item">
                        <label class="form-label" for="blogTitle">
                            <i data-lucide="heading" class="w-4 h-4 inline mr-2"></i>Blog Title
                        </label>
                        <input
                            type="text"
                            id="blogTitle"
                            name="blogTitle"
                            class="form-input"
                            placeholder="Enter blog title..."
                            required
                        />
                    </div>

                    <!-- Blog Author and Publish Date -->
                    <div class="form-row">
                        <div class="form-item">
                            <label class="form-label" for="blogAuthor">
                                <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>Blog Author
                            </label>
                            <input
                                type="text"
                                id="blogAuthor"
                                name="blogAuthor"
                                class="form-input"
                                placeholder="Enter author name..."
                                required
                            />
                        </div>
                        <div class="form-item">
                            <label class="form-label" for="blogDate">
                                <i data-lucide="calendar" class="w-4 h-4 inline mr-2"></i>Blog Publish Date (Optional)
                            </label>
                            <input
                                type="date"
                                id="blogDate"
                                name="blogDate"
                                class="form-input"
                            />
                        </div>
                    </div>

                    <!-- Blog Summary -->
                    <div class="form-item">
                        <label class="form-label" for="blogSummary">
                            <i data-lucide="file-text" class="w-4 h-4 inline mr-2"></i>Blog Summary
                        </label>
                        <textarea
                            id="blogSummary"
                            name="blogSummary"
                            class="form-input"
                            style="height: 6rem; resize: vertical;"
                            placeholder="Write a brief summary of your blog..."
                            required
                        ></textarea>
                    </div>

                    <!-- Ad Banner One (Beside Leadership Spotlight) -->
                    <div class="form-item">
                        <div class="flex justify-between items-center mb-2">
                            <label class="form-label text-sm flex items-center">
                                <i data-lucide="image" class="w-4 h-4 mr-2"></i>Ad Banner (Beside Leadership Spotlight)
                            </label>
                        </div>
                        <div class="space-y-2">
                            <input type="url" name="adBannerBesideUrl" class="form-input" placeholder="Image URL..." value="">
                            <input type="url" name="adBannerBesideHref" class="form-input" placeholder="Href for ad banner..." value="">
                        </div>
                    </div>

                    <!-- Ad Banner Two (Below Leadership Spotlight) -->
                    <div class="form-item">
                        <div class="flex justify-between items-center mb-2">
                            <label class="form-label text-sm flex items-center">
                                <i data-lucide="image" class="w-4 h-4 mr-2"></i>Ad Banner (Below Leadership Spotlight)
                            </label>
                        </div>
                        <div class="space-y-2">
                            <input type="url" name="adBannerBelowUrl" class="form-input" placeholder="Image URL..." value="">
                            <input type="url" name="adBannerBelowHref" class="form-input" placeholder="Href for ad banner..." value="">
                        </div>
                    </div>                   

                    <!-- Dynamic Content Sections -->
                    <div class="form-item">
                        <label class="form-label">
                            <i data-lucide="layers" class="w-4 h-4 inline mr-2"></i>Content Sections
                        </label>
                        
                        <!-- Dynamic Sections Container - Moved to top -->
                        <div id="dynamicSections" class="space-y-4 mb-4">
                            <!-- Dynamic sections will be added here -->
                        </div>
                        
                        <!-- Add Section Buttons - Moved to bottom for easy access -->
                        <div class="flex flex-wrap gap-2">
                            <button type="button" id="addTextBtn" class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/[0.03] border border-white/[0.08] hover:bg-white/[0.06] transition-colors" title="Add Text Content">
                                <i data-lucide="type" class="w-4 h-4"></i>
                                
                            </button>
                            <button type="button" id="addHeaderBtn" class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/[0.03] border border-white/[0.08] hover:bg-white/[0.06] transition-colors" title="Add Header">
                                <i data-lucide="heading-2" class="w-4 h-4"></i>
                                
                            </button>
                            <button type="button" id="addSubHeaderBtn" class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/[0.03] border border-white/[0.08] hover:bg-white/[0.06] transition-colors" title="Add Sub Header">
                                <i data-lucide="heading-3" class="w-4 h-4"></i>
                                
                            </button>
                            <button type="button" id="addSubHeaderTextBtn" class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/[0.03] border border-white/[0.08] hover:bg-white/[0.06] transition-colors" title="Add Sub Header Text">
                                <i data-lucide="heading-3" class="w-4 h-4"></i>
                                -
                                <i data-lucide="type" class="w-4 h-4"></i>
                                
                            </button>
                            <button type="button" id="addImageBtn" class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/[0.03] border border-white/[0.08] hover:bg-white/[0.06] transition-colors" title="Add Image">
                                <i data-lucide="image" class="w-4 h-4"></i>
                                
                            </button>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-end gap-3">
                        <button type="button" id="loadPreviewBtn" class="form-button bg-white hover:bg-gray-100 text-black">
                            <i data-lucide="eye" class="w-4 h-4 mr-2"></i>
                            Load Preview
                        </button>
                        <button type="submit" id="saveBlogBtn" class="form-button bg-white hover:bg-gray-100 text-black">
                            <i data-lucide="save" class="w-4 h-4 mr-2"></i>
                            Save Blog
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Edit Blogs Section -->
        <section id="editBlogs" class="content-section">
            <div class="form-container">
                <h2 class="section-title">Edit Blogs</h2>
                <div class="section-content">
                    <div class="mb-6">
                        <label class="form-label" for="searchBlog">Search Blog to Edit</label>
                        <input
                            type="text"
                            id="searchBlog"
                            class="form-input"
                            placeholder="Search by title or author..."
                        />
                    </div>
                    <div class="space-y-4">
                        <div class="p-4 bg-white/5 rounded-lg border border-white/10">
                            <h3 class="font-semibold mb-2">Sample Blog Title 1</h3>
                            <p class="text-sm text-white/60 mb-2">By John Doe • Technology • Dec 15, 2024</p>
                            <p class="text-sm mb-3">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
                            <div class="flex gap-2">
                                <button class="form-button text-xs px-3 py-1">
                                    <i data-lucide="edit" class="w-3 h-3 mr-1"></i>
                                    Edit
                                </button>
                                <button class="form-button bg-gray-600 hover:bg-gray-700 text-xs px-3 py-1">
                                    <i data-lucide="eye" class="w-3 h-3 mr-1"></i>
                                    Preview
                                </button>
                            </div>
                        </div>
                        <div class="p-4 bg-white/5 rounded-lg border border-white/10">
                            <h3 class="font-semibold mb-2">Sample Blog Title 2</h3>
                            <p class="text-sm text-white/60 mb-2">By Jane Smith • Business • Dec 12, 2024</p>
                            <p class="text-sm mb-3">Sed do eiusmod tempor incididunt ut labore et dolore...</p>
                            <div class="flex gap-2">
                                <button class="form-button text-xs px-3 py-1">
                                    <i data-lucide="edit" class="w-3 h-3 mr-1"></i>
                                    Edit
                                </button>
                                <button class="form-button bg-gray-600 hover:bg-gray-700 text-xs px-3 py-1">
                                    <i data-lucide="eye" class="w-3 h-3 mr-1"></i>
                                    Preview
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Delete Blogs Section -->
        <section id="deleteBlogs" class="content-section">
            <div class="form-container">
                <h2 class="section-title">Delete Blogs</h2>
                <div class="section-content">
                    <div class="mb-6">
                        <label class="form-label" for="searchDeleteBlog">Search Blog to Delete</label>
                        <input
                            type="text"
                            id="searchDeleteBlog"
                            class="form-input"
                            placeholder="Search by title or author..."
                        />
                    </div>
                    <div class="space-y-4">
                        <div class="p-4 bg-white/5 rounded-lg border border-red-500/20">
                            <h3 class="font-semibold mb-2">Sample Blog Title 1</h3>
                            <p class="text-sm text-white/60 mb-2">By John Doe • Technology • Dec 15, 2024</p>
                            <p class="text-sm mb-3">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
                            <div class="flex gap-2">
                                <button class="form-button bg-red-600 hover:bg-red-700 text-xs px-3 py-1">
                                    <i data-lucide="trash-2" class="w-3 h-3 mr-1"></i>
                                    Delete
                                </button>
                                <button class="form-button bg-gray-600 hover:bg-gray-700 text-xs px-3 py-1">
                                    <i data-lucide="eye" class="w-3 h-3 mr-1"></i>
                                    Preview
                                </button>
                            </div>
                        </div>
                        <div class="p-4 bg-white/5 rounded-lg border border-red-500/20">
                            <h3 class="font-semibold mb-2">Sample Blog Title 2</h3>
                            <p class="text-sm text-white/60 mb-2">By Jane Smith • Business • Dec 12, 2024</p>
                            <p class="text-sm mb-3">Sed do eiusmod tempor incididunt ut labore et dolore...</p>
                            <div class="flex gap-2">
                                <button class="form-button bg-red-600 hover:bg-red-700 text-xs px-3 py-1">
                                    <i data-lucide="trash-2" class="w-3 h-3 mr-1"></i>
                                    Delete
                                </button>
                                <button class="form-button bg-gray-600 hover:bg-gray-700 text-xs px-3 py-1">
                                    <i data-lucide="eye" class="w-3 h-3 mr-1"></i>
                                    Preview
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Manage Images Section -->
        <section id="manageImages" class="content-section">
            <div class="form-container">
                <h2 class="section-title">Manage Images</h2>
                <div class="section-content">
                    <div class="mb-6">
                        <label class="form-label" for="imageUpload">Upload New Image</label>
                        <input
                            type="file"
                            id="imageUpload"
                            accept="image/*"
                            class="form-input"
                            style="padding-top: 0.375rem; padding-bottom: 0.375rem;"
                        />
                        <button class="form-button mt-2">
                            <i data-lucide="upload" class="w-4 h-4 mr-2"></i>
                            Upload Image
                        </button>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <div class="relative group">
                            <div class="aspect-square bg-white/5 rounded-lg border border-white/10 flex items-center justify-center">
                                <i data-lucide="image" class="w-8 h-8 text-white/40"></i>
                            </div>
                            <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                                <div class="flex gap-2">
                                    <button class="form-button text-xs px-2 py-1">
                                        <i data-lucide="eye" class="w-3 h-3"></i>
                                    </button>
                                    <button class="form-button bg-red-600 hover:bg-red-700 text-xs px-2 py-1">
                                        <i data-lucide="trash-2" class="w-3 h-3"></i>
                                    </button>
                                </div>
                            </div>
                            <p class="text-xs text-white/60 mt-2 text-center">image1.jpg</p>
                        </div>
                        <div class="relative group">
                            <div class="aspect-square bg-white/5 rounded-lg border border-white/10 flex items-center justify-center">
                                <i data-lucide="image" class="w-8 h-8 text-white/40"></i>
                            </div>
                            <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                                <div class="flex gap-2">
                                    <button class="form-button text-xs px-2 py-1">
                                        <i data-lucide="eye" class="w-3 h-3"></i>
                                    </button>
                                    <button class="form-button bg-red-600 hover:bg-red-700 text-xs px-2 py-1">
                                        <i data-lucide="trash-2" class="w-3 h-3"></i>
                                    </button>
                                </div>
                            </div>
                            <p class="text-xs text-white/60 mt-2 text-center">image2.jpg</p>
                        </div>
                        <div class="relative group">
                            <div class="aspect-square bg-white/5 rounded-lg border border-white/10 flex items-center justify-center">
                                <i data-lucide="image" class="w-8 h-8 text-white/40"></i>
                            </div>
                            <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                                <div class="flex gap-2">
                                    <button class="form-button text-xs px-2 py-1">
                                        <i data-lucide="eye" class="w-3 h-3"></i>
                                    </button>
                                    <button class="form-button bg-red-600 hover:bg-red-700 text-xs px-2 py-1">
                                        <i data-lucide="trash-2" class="w-3 h-3"></i>
                                    </button>
                                </div>
                            </div>
                            <p class="text-xs text-white/60 mt-2 text-center">image3.jpg</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <script>
        class ExpandableTabs {
            constructor(container, options = {}) {
                this.container = container;
                this.tabs = options.tabs || [];
                this.activeColor = options.activeColor || 'text-blue-600';
                this.onChange = options.onChange || (() => {});
                this.selected = null;
                this.init();
            }
            init() {
                this.render();
                this.bindEvents();
            }
            render() {
                this.container.innerHTML = '';
                this.tabs.forEach((tab, index) => {
                    if (tab.type === 'separator') {
                        const separator = this.createSeparator();
                        this.container.appendChild(separator);
                    } else {
                        const button = this.createTabButton(tab, index);
                        this.container.appendChild(button);
                    }
                });
            }
            createSeparator() {
                const separator = document.createElement('div');
                separator.className = 'separator';
                separator.style.background = 'rgba(255, 255, 255, 0.3)';
                separator.setAttribute('aria-hidden', 'true');
                return separator;
            }
            createTabButton(tab, index) {
                const button = document.createElement('button');
                const isSelected = this.selected === index;
                button.className = `tab-button relative flex items-center text-sm font-medium tracking-wide transition-all duration-[600ms] ${
                    isSelected ? 'selected' : ''
                }`;
                if (isSelected) {
                    button.style.color = this.activeColor || 'rgb(147, 197, 253)';
                } else {
                    button.style.color = 'rgba(255, 255, 255, 0.6)';
                }
                button.dataset.index = index;
                const iconWrapper = document.createElement('div');
                iconWrapper.className = 'flex-shrink-0';
                iconWrapper.innerHTML = `<i data-lucide="${tab.icon}" class="w-4 h-4"></i>`;
                const textElement = document.createElement('span');
                textElement.className = `tab-text ${isSelected ? 'expanded' : ''}`;
                textElement.textContent = tab.title;
                button.appendChild(iconWrapper);
                button.appendChild(textElement);
                button.addEventListener('mouseenter', () => {
                    if (!button.classList.contains('selected')) {
                        button.style.color = 'rgba(255, 255, 255, 0.9)';
                    }
                });
                button.addEventListener('mouseleave', () => {
                    if (!button.classList.contains('selected')) {
                        button.style.color = 'rgba(255, 255, 255, 0.6)';
                    }
                });
                return button;
            }
            handleSelect(index) {
                this.selected = index;
                const buttons = this.container.querySelectorAll('.tab-button');
                buttons.forEach((button, i) => {
                    const buttonIndex = parseInt(button.dataset.index);
                    const textElement = button.querySelector('.tab-text');
                    if (this.selected === buttonIndex) {
                        button.classList.add('selected');
                        button.style.color = this.activeColor || 'rgb(147, 197, 253)';
                        textElement.classList.add('expanded');
                    } else {
                        button.classList.remove('selected');
                        button.style.color = 'rgba(255, 255, 255, 0.6)';
                        textElement.classList.remove('expanded');
                    }
                });
                this.onChange(this.selected);
            }
            bindEvents() {
                if (this.eventsbound) return;
                this.eventsbound = true;
                this.container.addEventListener('click', (e) => {
                    const button = e.target.closest('.tab-button');
                    if (button && button.dataset.index !== undefined) {
                        this.handleSelect(parseInt(button.dataset.index));
                    }
                });
            }
        }
        // Function to show/hide content sections
        function showContentSection(tabTitle) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Show the selected section
            let sectionId = '';
            switch(tabTitle) {
                case 'Add Blogs':
                    sectionId = 'addBlogs';
                    break;
                case 'Edit Blogs':
                    sectionId = 'editBlogs';
                    break;
                case 'Delete Blogs':
                    sectionId = 'deleteBlogs';
                    break;
                case 'Manage Images':
                    sectionId = 'manageImages';
                    break;
            }
            
            if (sectionId) {
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                }
            }
        }
        
        // Form submission handler
        function handleFormSubmit(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Set today's date if no date is provided
            if (!data.blogDate) {
                const today = new Date().toISOString().split('T')[0];
                data.blogDate = today;
            }
            
            console.log('Form submitted:', data);
            alert('Blog added successfully! (This is a demo)');
            event.target.reset();
        }
        
        // Load Preview handler
        async function handleLoadPreview() {
            const form = document.getElementById('addBlogForm');
            const formData = new FormData(form);
            const data = {};
            for (let [key, value] of formData.entries()) {
                // Filter out dynamic section fields (they start with 'dynamic_')
                if (!key.startsWith('dynamic_')) {
                    data[key] = value;
                }
            }
            
            // Set today's date if no date is provided
            if (!data.blogDate) {
                const today = new Date().toISOString().split('T')[0];
                data.blogDate = today;
                document.getElementById('blogDate').value = today;
            }
            
            // Collect dynamic sections
            const dynamicSections = collectDynamicSections();
            data.dynamicSections = dynamicSections;
            
            try {
                // Show loading state
                const loadPreviewBtn = document.getElementById('loadPreviewBtn');
                const originalText = loadPreviewBtn.innerHTML;
                loadPreviewBtn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 mr-2 animate-spin"></i>Loading...';
                loadPreviewBtn.disabled = true;
                
                // Send POST request to server
                const response = await fetch('/admin_blog_preview', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                // Restore button state
                loadPreviewBtn.innerHTML = originalText;
                loadPreviewBtn.disabled = false;
                
                if (result.status === 'success') {
                    // Open preview in new window with server-returned HTML
                    const previewWindow = window.open('', 'preview', 'width=800,height=600,scrollbars=yes');
                    previewWindow.document.write(result.data);
                    previewWindow.document.close();
                } else {
                    alert('Error generating preview: ' + (result.message || 'Unknown error'));
                }
                
            } catch (error) {
                // Restore button state on error
                const loadPreviewBtn = document.getElementById('loadPreviewBtn');
                loadPreviewBtn.innerHTML = '<i data-lucide="eye" class="w-4 h-4 mr-2"></i>Load Preview';
                loadPreviewBtn.disabled = false;
                
                console.error('Error loading preview:', error);
                alert('Error loading preview: ' + error.message);
            }
        }
        
        // Dynamic Content Sections Management
        let sectionCounter = 0;
        
        function createDynamicSection(type, content = '') {
            sectionCounter++;
            const sectionId = `section_${sectionCounter}`;
            const sectionDiv = document.createElement('div');
            sectionDiv.className = 'dynamic-section p-4 rounded-lg  relative';
            sectionDiv.dataset.sectionId = sectionId;
            sectionDiv.dataset.sectionType = type;
            
            let sectionHTML = '';
            
            switch(type) {
                case 'text':
                    sectionHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <label class="form-label text-sm flex items-center">
                                <i data-lucide="type" class="w-4 h-4 mr-2"></i>Text Content
                            </label>
                            <button type="button" class="remove-section" data-section-id="${sectionId}">
                                <i data-lucide="x" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <textarea name="dynamic_text_${sectionId}" class="form-input" style="height: 4rem; resize: vertical;" placeholder="Enter your text content...">${content}</textarea>
                    `;
                    break;
                case 'header':
                    sectionHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <label class="form-label text-sm flex items-center">
                                <i data-lucide="heading" class="w-4 h-4 mr-2"></i>Header
                            </label>
                            <button type="button" class="remove-section" data-section-id="${sectionId}">
                                <i data-lucide="x" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <input type="text" name="dynamic_header_${sectionId}" class="form-input" placeholder="Enter header text..." value="${content}">
                    `;
                    break;
                case 'subheader':
                    sectionHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <label class="form-label text-sm flex items-center">
                                <i data-lucide="heading-2" class="w-4 h-4 mr-2"></i>SubHeader
                            </label>
                            <button type="button" class="remove-section" data-section-id="${sectionId}">
                                <i data-lucide="x" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <input type="text" name="dynamic_subheader_${sectionId}" class="form-input" placeholder="Enter subheader text..." value="${content}">
                    `;
                    break;
                case 'subheader-text':
                    sectionHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <label class="form-label text-sm flex items-center">
                                <i data-lucide="heading-3" class="w-4 h-4 mr-2"></i>Subheader Text
                            </label>
                            <button type="button" class="remove-section" data-section-id="${sectionId}">
                                <i data-lucide="x" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <textarea name="dynamic_subheader_text_${sectionId}" class="form-input" style="height: 3rem; resize: vertical;" placeholder="Enter subheader text content...">${content}</textarea>
                    `;
                    break;
                case 'image':
                    sectionHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <label class="form-label text-sm flex items-center">
                                <i data-lucide="image" class="w-4 h-4 mr-2"></i>Image + Alt Text
                            </label>
                            <button type="button" class="remove-section" data-section-id="${sectionId}">
                                <i data-lucide="x" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <div class="space-y-2">
                            <input type="url" name="dynamic_image_url_${sectionId}" class="form-input" placeholder="Image URL..." value="${content.url || ''}">
                            <input type="text" name="dynamic_image_alt_${sectionId}" class="form-input" placeholder="Alt text for image..." value="${content.alt || ''}">
                        </div>
                    `;
                    break;
            }
            
            sectionDiv.innerHTML = sectionHTML;
            return sectionDiv;
        }
        
        function addDynamicSection(type) {
            const container = document.getElementById('dynamicSections');
            const section = createDynamicSection(type);
            container.appendChild(section);
            
            // Re-initialize Lucide icons for the new section
            lucide.createIcons();
            
            // Add event listener for remove button
            const removeBtn = section.querySelector('.remove-section');
            removeBtn.addEventListener('click', function() {
                section.remove();
                updatePreviewIfVisible();
            });
            
            // Add input event listeners for live preview updates
            const inputs = section.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', updatePreviewIfVisible);
            });
            
            // Scroll to the newly added section
            setTimeout(() => {
                section.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }, 100);
            
            updatePreviewIfVisible();
        }
        
        function updatePreviewIfVisible() {
            // This function will be called to update preview in real-time
            // We'll implement this when the preview window is open
        }
        
        function collectDynamicSections() {
            const sections = [];
            const dynamicSections = document.querySelectorAll('.dynamic-section');
            
            dynamicSections.forEach(section => {
                const type = section.dataset.sectionType;
                const sectionId = section.dataset.sectionId;
                
                let sectionData = { type, id: sectionId };
                
                switch(type) {
                    case 'text':
                        sectionData.content = section.querySelector(`[name="dynamic_text_${sectionId}"]`).value;
                        break;
                    case 'header':
                        sectionData.content = section.querySelector(`[name="dynamic_header_${sectionId}"]`).value;
                        break;
                    case 'subheader':
                        sectionData.content = section.querySelector(`[name="dynamic_subheader_${sectionId}"]`).value;
                        break;
                    case 'subheader-text':
                        sectionData.content = section.querySelector(`[name="dynamic_subheader_text_${sectionId}"]`).value;
                        break;
                    case 'image':
                        sectionData.content = {
                            url: section.querySelector(`[name="dynamic_image_url_${sectionId}"]`).value,
                            alt: section.querySelector(`[name="dynamic_image_alt_${sectionId}"]`).value
                        };
                        break;
                }
                
                sections.push(sectionData);
            });
            
            return sections;
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            
            // Add form submission handler
            const addBlogForm = document.getElementById('addBlogForm');
            if (addBlogForm) {
                addBlogForm.addEventListener('submit', handleFormSubmit);
            }
            
            // Add load preview button handler
            const loadPreviewBtn = document.getElementById('loadPreviewBtn');
            if (loadPreviewBtn) {
                loadPreviewBtn.addEventListener('click', handleLoadPreview);
            }
            
            // Add dynamic section button handlers
            document.getElementById('addTextBtn').addEventListener('click', () => addDynamicSection('text'));
            document.getElementById('addHeaderBtn').addEventListener('click', () => addDynamicSection('header'));
            document.getElementById('addSubHeaderBtn').addEventListener('click', () => addDynamicSection('subheader'));
            document.getElementById('addSubHeaderTextBtn').addEventListener('click', () => addDynamicSection('subheader-text'));
            document.getElementById('addImageBtn').addEventListener('click', () => addDynamicSection('image'));
            
            const navbarTabs = [
                { title: "Homepage", icon: "home" },
                { title: "Add Blogs", icon: "plus-circle" },
                { title: "Edit Blogs", icon: "edit" },
                { title: "Delete Blogs", icon: "trash-2" },
                { title: "Manage Images", icon: "image" }
            ];
            const navbarContainer = document.getElementById('navbarTabs');
            const expandableTabs = new ExpandableTabs(navbarContainer, {
                tabs: navbarTabs,
                activeColor: 'text-blue-400',
                onChange: (index) => {
                    console.log('Navbar tab changed:', index);
                    if (index !== null && navbarTabs[index]) {
                        console.log('Selected tab:', navbarTabs[index].title);
                        if (navbarTabs[index].title === "Homepage") {
                            window.location.href = '/admin_login';
                        } else {
                            showContentSection(navbarTabs[index].title);
                        }
                    }
                }
            });
            expandableTabs.selected = 1;
            expandableTabs.render();
            setTimeout(() => {
                lucide.createIcons();
            }, 100);
        });
    </script>
</body>
</html>